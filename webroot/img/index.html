<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>WebApp开发之旅</title>

    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="css/theme/default.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>
          <h2>WebApp开发之旅</h2>
          <h4>基于云OS开发WebApp更畅快</h4>
          <p>
            <small>Created by <a href="http://developer.yunos.com" target="_blank">云OS开发者平台</a></small>
          </p>
          <img src="img/qrcode.png" />
        </section>

        <section>
          <h2>Agenda</h2>
          <img src="img/overview.png" />
        </section>

        <section>
          <h2>开发</h2>
          <img src="img/dev.png" />
        </section>
        <section>
          <section>
            <h2>开发 · 结构</h2>
          </section>
          <section>
            <h2>manifest.json</h2>
            <pre><code>
{
    "name": "Helloworld",
    "version": "1.0.0",
    "type": "certified",
    "package": "com.yunos.samples.helloworld",
    "minimum_runtime_version": "0.0.1",
    "description": "a simple WebApp sample code",
    "icons": {
        "36": "/style/icons/36/icon-36.png",
        "48": "/style/icons/48/icon-48.png",
        "72": "/style/icons/72/icon-72.png",
        "96": "/style/icons/96/icon-96.png"
    },
    "developer": {
        "name": "yunos",
        "url": "http://www.yunos.com"
    },
    "appcache": "settings-host.appcache",
    "launch_url": "http://webrt-helloworld.aliapp.com/index.html",
    "locales": {
       "zh-rCN": {
           "name": "Helloworld",
           "description": "一个简单的WebApp代码实例",
           "developer": {
                "name": "NG-WebOS",
                "url": "http://www.yunos.com/"
           }
       }
    },
    "fullscreen": "true",
    "platform": "phone",
    "permissions": {
            "geolocation": {}
    }
}
            </code></pre>
          </section>
          <section>
            <h2>两种部署模式</h2>
            <h4>Packaged VS Hosted</h4>
          </section>
          <section>
            <h2>代码结构</h2>
            <img src="img/packaged.png">
          </section>
        </section>

        <section>
          <section>
            <h2>开发 · 功能</h2>
          </section>
          <section>
            <h2>Web API</h2>
            <h4>W3C/HTML5标准API和云OS特有的API</h4>
            <pre><code data-trim contenteditable style="font-size: 32px; margin-top: 40px;">
              screen.lockOrientation("landscape");
            </code></pre>
            <img width="48" height="48" src="img/play.png" border="0">
          </section>
        </section>

        <section>
          <section>
            <h2>开发 · 框架</h2>
          </section>
          <section >
            <h1>框架和库</h1>
            <h3 class="fragment fade">为什么用框架?</h3>
            <h2 class="fragment fade">jQuery:write less, do more</h2>

            <aside class="notes">
              Oh hey, these are some notes. They'll be hidden in your presentation, but you can see them if you open the speaker notes window (hit 's' on your keyboard).
            </aside>
          </section>
          <section>
            <h2>框架和库</h2>
            <p class="fragment fade">Boilerplate:html5Boilerplate/mobileBoilerplate</p>
            <p class="fragment fade">基础类库：zepto/jQuery/Underscore</p>
            <p class="fragment fade">功能类库: Hammer.js/swipe.js/fastclick.js</p>
            <p class="fragment fade">模块化:requireJs/seaJs(支付宝)</p>
          </section>
          <section>
            <h2>框架和库</h2>
            <p class="fragment fade-in"><b>MVC</b>:Backbone.js/Spine.js/Angular.js/Ember.js</p>
            <p class="fragment fade-in"><img src="img/todo.png" alt="" width="600px"/></p>
          </section>
          <section>
            <h2>框架和库</h2>
            <p >ui框架:sencha Touch/jQuery mobile/jQ Touch</p>
            <div class="column aligncenter " style="position: relative;margin-top:0px;">
              <div id="touchPhone"><iframe id="touchPhoneIframe" class="touchPhoneScreenshot" src="http://dev.sencha.com/deploy/touch/examples/production/kitchensink/index.html?deviceType=Phone"></iframe>
                <div id="touchPhoneScreenshot" class="touchPhoneScreenshot" style="visibility: hidden;"></div>
              </div>
            </div>
          </section>
        </section>

        <section>
          <section>
            <h2>开发 · 工具</h2>
          </section>
          <section>
            <h2>连接手机和开发平台</h2>
            <img src="img/connect.png">
          </section>
          <section>
            <ul>
              <li>方式一：自动连接 By 云OS辅助插件<br>
                <img src="img/plugin.png" border="0">
              </li>
              <li>方式二：手动连接</li>
            </ul>
          </section>
          <section>
            <h2>一键安装</h2>
            <p>Packaged WebApp to device</p>
            <img src="img/install_packaged.png">
          </section>
          <section>
            <h2>一键安装</h2>
            <p>Hosted WebApp to device</p>
            <img src="img/install.png">
          </section>
          <section>
            <h2>应用调试</h2>
            <img src="img/debug.png">
          </section>
        </section>

        <!-- <section> -->
          <!-- <h2>优化</h2> -->
          <!-- <img src="img/tuning.png" /> -->
        <!-- </section> -->
        <section>
          <section>
            <h2>性能</h2>
            <p>Mark Zuckerberg: Our Biggest Mistake Was Betting Too Much On HTML5</p>
            <img src="img/facebook.png" alt="" width="600px" height="480px"/>
          </section>
          <section>
            <h2>性能</h2>
            <h3>fastbook!</h3>
            <video src="fastbook.m4v" height="270" width="480" preload="auto" controls></video>
          </section>
        </section>

        <section>
          <section>
            <h2>性能优化 · 网络</h2>
          </section>
        <section>
          <h2>毫秒必争</h2>
          <p>1000 ms delay == 7% loss in conversions</p>
          <img src="img/chart.png" alt="" />
        </section>
        <section>
          <h2>网络优化</h2>
          <ul>
            <li>避免不必要的重定向</li>
            <li>优化服务器的响应</li>
            <li>减少造成block的资源</li>
            <li>最大限度降低有效负荷：压缩图片，css，js</li>
          </ul>
        </section>
        <section>
          <h2>体验优化:比如,一个有趣的进度条</h2>
          <div class="progress-circle-container">
            <div class="progress-circle-outer animate">
            </div>
            <div class="progress-circle-inner animate">
              <span class="number">100</span>
              <span class="unit">%</span>
            </div>
          </div>
        </section>
        <section>
          <h2>更重要的</h2>
          <h3>非离线应用，也要为离线做设计</h3>
          <img class="fragment fade" src="img/applicationcache.jpg" alt="" />
          <img class="fragment fade" src="img/package.png" alt="" width="300px" height="190px"/>
        </section>
        <section>
          <h2>优化工具</h2>
          <ul>
            <li>PageSpeed Insight</li>
            <li>YSlow</li>
          </ul>
          <img src="img/pagespeed.png" alt="" />
        </section>
        </section>

        <section>
          <section>
            <h2>性能优化 · 计算</h2>
          </section>
        <section id="thirteen">
          <h2 class="bigfont">计算性能</h2>
          <ul>
            <h3 class="left">关键点</h3>
            <li>内存控制</li>
            <li>高效的js代码</li>
            <li>算法复杂度</li>
          </ul>
        </section>
        <section id="fourteen">
            <h2>js内存控制</h2>
            <ul style="top:-150px; position:relative;">
              <li>避免闭包导致的循环引用</li>
              <li>控制Dom遍历范围和次数</li>
              <li>使用事件代理</li>
              <li>使用高效的Dom选择器</li>
              <li>使用内存池来减少内存跳变</li>
              <li>……</li>
            </ul>
            <img  class="img-shadow" src="img/performance.png" alt="" width="320px" height="480px"/>
        </section>
        <section id="fifteen">
          <h2>高效的js</h2>
          <ul style="top:-150px; position:relative;">
            <li>使用Array来拼接字符串</li>
            <li>将循环控制量保存到局部变量</li>
            <li>顺序无关的遍历时，用while</li>
            <li>避免使用with</li>
            <li>避免使用eval</li>
            <li>……</li>
          </ul>
          <img  class="img-shadow" src="img/performance.png" alt="" width="320px" height="480px"/>
        </section>
        <section>
          <h2>优化工具</h2>
          <h3>YUNOS DEV TOOLS:Timeline-memory</h3>
          <img src="img/memory.png" alt="" />
        </section>
        <section>
          <h2>优化工具</h2>
          <h3>Benchmark:benchmark.js</h3>
          <img src="img/benchmark.png" alt="" width="800px" height="500px"/>
        </section>
        <section>
          <h2>优化工具</h2>
          <h3>yunos dev tools:profile</h3>
          <img src="img/profile.png" alt="" />
        </section>
        <section>
          <h2>优化工具</h2>
          <h3>yunos dev tools:tracing</h3>
          <img src="img/trace.png" alt="" />
        </section>
        </section>

        <section>
          <section>
            <h2>性能优化 · 渲染</h2>
          </section>
        <section>
        <h2>浏览器渲染过程</h2>
        <p>webkit</p>
        <img src="img/browser1.png" alt="" width="720px" height="350px"/>
        <img src="img/browser2.png" alt="" width="720px" height="140px"/>
        </section>
        <section>
          <h2>重绘和重排</h2>
          <p>(paint  &  layout)</p>
          <ul>
            <p>重排</p>
            <ul>
              <li>Dom元素的几何属性发生变</li>
              <li>Dom树的结构发生了变化</li>
              <li>获取某些属性：比如offsetTop,scrollTop,clientTop</li>
            </ul>
            <p>重绘：visibility，background color</p>
          </ul>
        </section>
        <section>
          <h2>Dom 操作</h2>
          <ul>
            <li>
              <p>避免直接操作Dom</p>
              <ul>
                <li>使用DocumentFragment</li>
                <li>节点克隆</li>
              </ul>
            </li>
            <li><p>减少Dom数量和深度</p>
              <ul>
                <li>Dom越多速度越慢</li>
                <li>父节点重排，子节点全部重排</li>
              </ul>
            </li>
            <li>
              <p>消除Dom之间的依赖</p>
              <ul>
                <li>position:absolute</li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <h2>一次性修改样式</h2>
          <p>糟糕的写法</p>
          <pre><code>
          var changeDiv = document.getElementById(‘changeDiv’);
              changeDiv.style.color = ‘#093′;
              changeDiv.style.background = ‘#eee’;
              changeDiv.style.height = ’200px’;
          </code></pre>
          <p>好的写法</p>
          <pre><code>
         .changeDiv {
            background: #eee;
            color: #093;
            height: 200px;
          }
          document.getElementById(‘changeDiv’).classList.add(‘changeDiv’);
          </code></pre>
        </section>
        <section>
          <h2>layer model</h2>
          <ol>
            <li>Dom转换为layer</li>
            <li>绘制每个layer,转换为bitmap</li>
            <li>以纹理的形式上传到GPU</li>
            <li>将所有的layer组合成最终显示图像</li>
          </ol>
          <h3 style="margin-top:30px;" class="fragment fade">任何移动都不会引起重绘</h3>
        </section>
        <section>
          <h2>动画和layer</h2>
          <button id="layer-control" style="float:right" >加宽</button>
          <div id="layer">layer</div>
          <p>YUNOS DEV TOOLS:Show composited layer borders</p>
          <p>YUNOS DEV TOOLS:Show paint rectangles</p>
        </section>
        <section>
          <div style="top: -200.5px;position: relative;">
                    <h2>滚动和layer</h2>
                    <p style="margin-bottom: 55px;">
                    </p>
                    <button style="float:right" onclick="document.getElementById('rotationContainer').classList.toggle('rotated');">滚动</button>
                    <div id="perspectiveContainer">
                      <div id="rotationContainer">
                        <div id="viewport">
                          <div class="blueborder"></div>
                        </div>
                        <img id="gmailtop" src="img/topbar.png">
                        <img id="gmailside" src="img/menu.png">
                        <img id="gmailmessages" style="" src="img/messagelist.png">
                      </div>
                    </div>
          </div>
        </section>
        <section>
          <h2>滚动性能</h2>
          <ul>
            <li>使用原生滚动条</li>
            <li>position:fixed;</li>
            <li>hover 效果</li>
            <li>touch listener</li>
            <li>过多无用的layer</li>
          </ul>
        </section>
        <section>
        <h2>layer的生成</h2>
        <ul>
          <li>3d transform</li>
          <li>video标签</li>
          <li>canvas标签</li>
          <li>插件，例如flash</li>
          <li>……</li>
        </ul>
        </section>
        <section>
          <h2>减少绘制区域</h2>
          <div class="toggle-test">
            <svg height="86" width="221" class="redraw-test">
              <style>.redraw-test 
                text { font-size:40px; font-family: sans-serif; }
              </style><text y="30.391" x="0">
              <tspan class="toggler">Hello</tspan>
              <tspan class="toggler">World</tspan>
            </text><text y="85.391" x="0" class="toggler on">Hello</text>
            <text y="85.391" x="103" class="toggler">World</text></svg>
          <p style="font-size:40px;margin:0;color:#000;line-height:1.5"><span class="toggler">Hello</span> <span class="toggler">World</span></p>
        </div>
      </section>
      <section>
        <h2>CSS3 please!</h2>
        <h3>使用css 3 animation && transition</h3>
        <h3>开启硬件加速:translateZ/translate3d</h3>
        <button onclick="toggleShape()" style="
          position: absolute;
          top: 650px;
          left: 419px;
          z-index: 20;
          ">Toggle Shape</button>
        <div id="container">
          <div id="stage">
            <div id="shape" class="cube backfaces">
              <div class="plane one">A</div>
              <div class="plane two">L</div>
              <div class="plane three">I</div>
              <div class="plane four">B</div>
              <div class="plane five">A</div>
              <div class="plane six">B</div>
              <div class="plane seven">A</div>
              <div class="plane eight">Y</div>
              <div class="plane nine">U</div>
              <div class="plane ten">N</div>
              <div class="plane eleven">O</div>
              <div class="plane twelve">S</div>
            </div>
          </div>
        </div>
        <!-- <ul> -->
          <!-- <li>transition</li> -->
          <!-- <li>animation</li> -->
        <!-- </ul> -->
        <!-- <h3>开启硬件加速</h3> -->
          <!-- <ul> -->
            <!-- <li>translateZ</li> -->
            <!-- <li>translate3d</li> -->
          <!-- </ul> -->
        </section>
        <section>
          <h2>注意CSS3的性能问题</h2>
          <h3>expensive style</h3>
          <ul>
            <li>box shadow</li>
            <li>gradient</li>
            <li>background-size</li>
          </ul>
        </section>
        <section>
          <h2>其他工具</h2>
          <h3>YUNOS DEV TOOLS:Timeline</h3>
          <img src="img/timeline.png" alt="" />
        </section>
        <section>
          <h2>其他工具</h2>
          <h3>YUNOS DEV TOOLS:continues page repaint</h3>
          <img src="img/continus.png" alt="" />
        </section>
        <section>
          <h2>其他工具</h2>
          <h3>YUNOS DEV TOOLS:FPS</h3>
          <img src="img/fps.png" alt="" />
        </section>
        <section>
          <h2>The last but not least</h2>
          <h2>关注电量</h2>
          <p>性能越差，耗电量越大</p>
          <!-- <div id="batteries"> -->
            <!-- <div class="battery" data-battery="10"></div> -->
            <!-- <div class="battery" data-battery="20"></div> -->
            <!-- <div class="battery" data-battery="30"></div> -->
            <!-- <div class="battery" data-battery="40"></div> -->
            <!-- <div class="battery" data-battery="50"></div> -->
            <!-- <div class="battery" data-battery="60"></div> -->
            <!-- <div class="battery" data-battery="70"></div> -->
            <!-- <div class="battery" data-battery="80"></div> -->
            <!-- <div class="battery" data-battery="90"></div> -->
            <!-- <div class="battery" data-battery="100"></div> -->
          <!-- </div> -->
        </section>
        </section>

        <section>
          <h2>部署</h2>
          <img src="img/ace.png">
        </section>

        <section>
          <h2>运营</h2>
          <img src="img/market.png" />
        </section>

        <section>
          <h2>运营 · 应用中心</h2>
          <img src="img/appstore.png">
        </section>

        <section>
          <h2>运营 · 社区</h2>
        </section>

        <section>
          <h2>Q&A</h2>
        </section>
      </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>
    <script src="js/custom.js"></script>

    <script>

      // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
      transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

      // Optional libraries used to extend on reveal.js
      dependencies: [
        { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
        { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        // { src: 'plugin/leap/leap.js', async: true }
        // { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
        // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]
    });

    </script>

  </body>
</html>
